[{"/Users/jacktseng/Desktop/AppWorks/personal-project/src/index.js":"1","/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/AppHeader/AppHeader.jsx":"2","/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/SearchBar/SearchBar.jsx":"3","/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/app/App.jsx":"4","/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/appHeader/AppHeader.jsx":"5","/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/pageHeader/PageHeader.jsx":"6","/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/videoList/VideoList.jsx":"7","/Users/jacktseng/Desktop/AppWorks/personal-project/src/api/youtube.js":"8","/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/videoCard/VideoCard.jsx":"9","/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/searchBar/SearchBar.jsx":"10","/Users/jacktseng/Desktop/AppWorks/personal-project/src/firebase.js":"11","/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/partyRoom/PartyRoom.jsx":"12","/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/chatBox/ChatBox.jsx":"13","/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/chatMessage/ChatMessage.jsx":"14","/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/inputBox/InputBox.jsx":"15","/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/videoPlayer/VideoPlayer.jsx":"16","/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/modalForm/ModalForm.jsx":"17","/Users/jacktseng/Desktop/AppWorks/personal-project/src/util/modal.js":"18","/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/oldUserForm/OldUserForm.jsx":"19","/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/userRoom/UserRoom.jsx":"20","/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/userRoomCard/UserRoomCard.jsx":"21","/Users/jacktseng/Desktop/AppWorks/personal-project/src/util/localStorage.js":"22","/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/activeRoom/ActiveRoom.jsx":"23"},{"size":276,"mtime":1607483615351,"results":"24","hashOfConfig":"25"},{"size":301,"mtime":1607407797195,"results":"26","hashOfConfig":"25"},{"size":535,"mtime":1607409295935,"results":"27","hashOfConfig":"25"},{"size":3465,"mtime":1608544609210,"results":"28","hashOfConfig":"25"},{"size":1371,"mtime":1608544259619,"results":"29","hashOfConfig":"25"},{"size":354,"mtime":1607410119237,"results":"30","hashOfConfig":"25"},{"size":624,"mtime":1608449677001,"results":"31","hashOfConfig":"25"},{"size":1107,"mtime":1608542363473,"results":"32","hashOfConfig":"25"},{"size":681,"mtime":1608524468405,"results":"33","hashOfConfig":"25"},{"size":1775,"mtime":1608544710752,"results":"34","hashOfConfig":"25"},{"size":904,"mtime":1608258397270,"results":"35","hashOfConfig":"25"},{"size":3421,"mtime":1608519106544,"results":"36","hashOfConfig":"25"},{"size":1190,"mtime":1608270038640,"results":"37","hashOfConfig":"25"},{"size":420,"mtime":1608475909718,"results":"38","hashOfConfig":"25"},{"size":1185,"mtime":1608278043571,"results":"39","hashOfConfig":"25"},{"size":4541,"mtime":1608532207058,"results":"40","hashOfConfig":"25"},{"size":3569,"mtime":1608103740019,"results":"41","hashOfConfig":"25"},{"size":400,"mtime":1608013552818,"results":"42","hashOfConfig":"25"},{"size":575,"mtime":1608103599320,"results":"43","hashOfConfig":"25"},{"size":1260,"mtime":1608517485031,"results":"44","hashOfConfig":"25"},{"size":668,"mtime":1608103865984,"results":"45","hashOfConfig":"25"},{"size":217,"mtime":1608258709171,"results":"46","hashOfConfig":"25"},{"size":2424,"mtime":1608538276509,"results":"47","hashOfConfig":"25"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},"1yjb978",{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"69"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"77","usedDeprecatedRules":"78"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"81","usedDeprecatedRules":"64"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"69"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"100","messages":"101","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/jacktseng/Desktop/AppWorks/personal-project/src/index.js",[],["102","103"],"/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/AppHeader/AppHeader.jsx",[],"/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/SearchBar/SearchBar.jsx",[],"/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/app/App.jsx",[],"/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/appHeader/AppHeader.jsx",[],"/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/pageHeader/PageHeader.jsx",[],["104","105"],"/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/videoList/VideoList.jsx",[],["106","107"],"/Users/jacktseng/Desktop/AppWorks/personal-project/src/api/youtube.js",[],"/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/videoCard/VideoCard.jsx",[],["108","109"],"/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/searchBar/SearchBar.jsx",["110"],"/Users/jacktseng/Desktop/AppWorks/personal-project/src/firebase.js",[],["111","112"],"/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/partyRoom/PartyRoom.jsx",["113"],"import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport './PartyRoom.scss';\nimport firebase, { db } from '../../firebase';\nimport { getUserData } from '../../util/localStorage';\nimport ChatBox from '../chatBox/ChatBox';\nimport VideoPlayer from '../videoPlayer/VideoPlayer';\nimport { HiShare } from 'react-icons/hi';\n\nfunction Room() {\n  const [videoId, setVideoId] = useState('');\n  const [showNotification, setShowNotification] = useState(false);\n  const [activeUser, setActiveUser] = useState();\n  const { userId, userName } = getUserData();\n\n  const { roomId } = useParams();\n  const ref = db.collection('partyroom').doc(roomId);\n  const activeUserRef = ref.collection('activeUser');\n  let youtubeURL = 'https://www.youtube.com/watch?v=';\n  let videoURL = `${youtubeURL}${videoId}`;\n  // console.log('roomId', roomId);\n\n  useEffect(() => {\n    ref.get().then((doc) => {\n      // console.log(doc.data());\n      setVideoId(doc.data().videoId);\n      // setActiveUser(doc.data().activeUser);\n    });\n\n    // activeUserRef.onSnapshot();\n\n    ref.update({\n      activeUser: firebase.firestore.FieldValue.arrayUnion(userId),\n    });\n\n    activeUserRef.doc(userId).set({\n      userId,\n      userName,\n    });\n\n    monitorActiveUsers();\n\n    const updateUserStatus = () => {\n      activeUserRef.doc(userId).delete();\n      ref.update({\n        activeUser: firebase.firestore.FieldValue.arrayRemove(userId),\n      });\n    };\n\n    window.addEventListener('beforeunload', updateUserStatus);\n\n    return () => {\n      updateUserStatus();\n      window.removeEventListener('beforeunload', updateUserStatus);\n    };\n  }, []);\n  console.log('user id:', userId);\n  // console.log('active users:', activeUser);\n\n  const monitorActiveUsers = () => {\n    const unsubscribe = activeUserRef.onSnapshot((snap) => {\n      const data = snap.docs.map((doc) => doc.data());\n      console.log('Current data: ', data);\n      setActiveUser(data);\n    });\n    return () => unsubscribe();\n  };\n  console.log('active users:', activeUser);\n\n  const copyURL = () => {\n    const URL = window.location.href;\n    textToClipboard(URL);\n    setShowNotification(true);\n    setTimeout(() => {\n      setShowNotification(false);\n    }, 3000);\n  };\n\n  const textToClipboard = (text) => {\n    let dummy = document.createElement('textarea');\n    document.body.appendChild(dummy);\n    dummy.value = text;\n    dummy.select();\n    document.execCommand('copy');\n    document.body.removeChild(dummy);\n  };\n\n  return (\n    <>\n      <div className='info-box'>\n        <h2>Welcome to the room!</h2>\n        <div className='info-card info-card1'>Bruno Mars</div>\n      </div>\n      <div className='active-users'>\n        <h3 className='title'>Users in the room</h3>\n        {activeUser &&\n          activeUser.length &&\n          activeUser.map((user) => <div className='user-name'>{user.userName}</div>)}\n      </div>\n      <main className='PartyRoom'>\n        <div className='share-link'>\n          <p>Click the icon to invite your friends</p>\n          <HiShare className='share-icon' size={20} onClick={copyURL} />\n          {showNotification && <div className='notification'>Copied link!</div>}\n        </div>\n        {/* <h3>Party room id: {roomId}</h3> */}\n        {videoId && <VideoPlayer videoURL={videoURL} roomId={roomId} />}\n\n        <ChatBox roomId={roomId} />\n      </main>\n    </>\n  );\n}\n\nexport default Room;\n",["114","115"],"/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/chatBox/ChatBox.jsx",["116"],"import React, { useState, useEffect } from 'react';\nimport './ChatBox.scss';\nimport firebase from '../../firebase';\nimport ChatMessage from '../chatMessage/ChatMessage';\nimport InputBox from '../inputBox/InputBox';\n\nfunction ChatBox({ roomId }) {\n  const [messages, setMessages] = useState(null);\n\n  const db = firebase.firestore();\n  const roomRef = db.collection('partyroom').doc(roomId);\n  const messagesRef = roomRef.collection('messages');\n\n  useEffect(() => {\n    renderMessages();\n    return () => {\n      setMessages(null);\n    };\n  }, []);\n\n  const renderMessages = () => {\n    const unsubscribe = messagesRef.orderBy('timeSent').onSnapshot((snap) => {\n      const data = snap.docs.map((doc) => doc.data());\n      console.log('Current data: ', data);\n      setMessages(data);\n    });\n    return () => unsubscribe();\n  };\n\n  return (\n    <div className='ChatBox'>\n      <h3>Chat box</h3>\n      {/* <p className='room-id'>roomId: {roomId}</p> */}\n      <div className='messages'>\n        {messages &&\n          messages.map((message, index) => <ChatMessage message={message} key={index} />)}\n      </div>\n      <InputBox roomId={roomId} />\n    </div>\n  );\n}\n\nexport default ChatBox;\n","/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/chatMessage/ChatMessage.jsx",[],"/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/inputBox/InputBox.jsx",[],"/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/videoPlayer/VideoPlayer.jsx",["117","118"],"/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/modalForm/ModalForm.jsx",[],"/Users/jacktseng/Desktop/AppWorks/personal-project/src/util/modal.js",[],"/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/oldUserForm/OldUserForm.jsx",[],"/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/userRoom/UserRoom.jsx",[],"/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/userRoomCard/UserRoomCard.jsx",[],"/Users/jacktseng/Desktop/AppWorks/personal-project/src/util/localStorage.js",[],"/Users/jacktseng/Desktop/AppWorks/personal-project/src/components/activeRoom/ActiveRoom.jsx",[],{"ruleId":"119","replacedBy":"120"},{"ruleId":"121","replacedBy":"122"},{"ruleId":"119","replacedBy":"123"},{"ruleId":"121","replacedBy":"124"},{"ruleId":"119","replacedBy":"125"},{"ruleId":"121","replacedBy":"126"},{"ruleId":"119","replacedBy":"127"},{"ruleId":"121","replacedBy":"128"},{"ruleId":"129","severity":1,"message":"130","line":3,"column":10,"nodeType":"131","messageId":"132","endLine":3,"endColumn":29},{"ruleId":"119","replacedBy":"133"},{"ruleId":"121","replacedBy":"134"},{"ruleId":"135","severity":1,"message":"136","line":56,"column":6,"nodeType":"137","endLine":56,"endColumn":8,"suggestions":"138"},{"ruleId":"119","replacedBy":"139"},{"ruleId":"121","replacedBy":"140"},{"ruleId":"135","severity":1,"message":"141","line":19,"column":6,"nodeType":"137","endLine":19,"endColumn":8,"suggestions":"142"},{"ruleId":"129","severity":1,"message":"143","line":8,"column":10,"nodeType":"131","messageId":"132","endLine":8,"endColumn":21},{"ruleId":"135","severity":1,"message":"144","line":68,"column":6,"nodeType":"137","endLine":68,"endColumn":8,"suggestions":"145"},"no-native-reassign",["146"],"no-negated-in-lhs",["147"],["146"],["147"],["146"],["147"],["146"],["147"],"no-unused-vars","'IoSearchCircleSharp' is defined but never used.","Identifier","unusedVar",["146"],["147"],"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'activeUserRef', 'monitorActiveUsers', 'ref', 'userId', and 'userName'. Either include them or remove the dependency array.","ArrayExpression",["148"],["146"],["147"],"React Hook useEffect has a missing dependency: 'renderMessages'. Either include it or remove the dependency array.",["149"],"'playingTime' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'monitorFirestore'. Either include it or remove the dependency array.",["150"],"no-global-assign","no-unsafe-negation",{"desc":"151","fix":"152"},{"desc":"153","fix":"154"},{"desc":"155","fix":"156"},"Update the dependencies array to be: [activeUserRef, monitorActiveUsers, ref, userId, userName]",{"range":"157","text":"158"},"Update the dependencies array to be: [renderMessages]",{"range":"159","text":"160"},"Update the dependencies array to be: [monitorFirestore]",{"range":"161","text":"162"},[1658,1660],"[activeUserRef, monitorActiveUsers, ref, userId, userName]",[544,546],"[renderMessages]",[2116,2118],"[monitorFirestore]"]